<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>卿核大六壬</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>卿核大六壬</h1>
                
        <div class="control-panel">
            <div class="control-group">
                <div class="d-flex align-items-center">
                    <input type="checkbox" id="month-general-manual" class="me-2">
                    <label for="month-general-manual" class="me-2">手动选择</label>
                    <label for="month-general">月将:</label>
                </div>
                <select id="month-general">
                    <option value="亥">正月雨水后 - 亥(登明)</option>
                    <option value="戌">二月春分后 - 戌(河魁)</option>
                    <option value="酉">三月谷雨后 - 酉(从魁)</option>
                    <option value="申">四月小满后 - 申(传送)</option>
                    <option value="未">五月夏至后 - 未(小吉)</option>
                    <option value="午">六月大暑后 - 午(胜光)</option>
                    <option value="巳">七月处暑后 - 巳(太乙)</option>
                    <option value="辰">八月白露后 - 辰(天罡)</option>
                    <option value="卯">九月寒露后 - 卯(太冲)</option>
                    <option value="寅">十月立冬后 - 寅(功曹)</option>
                    <option value="丑">十一月大雪后 - 丑(大吉)</option>
                    <option value="子">十二月小寒后 - 子(神后)</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="time-branch">占时 (自动):</label>
                <select id="time-branch">
                    <option value="子">子时 (23:00-1:00)</option>
                    <option value="丑">丑时 (1:00-3:00)</option>
                    <option value="寅">寅时 (3:00-5:00)</option>
                    <option value="卯">卯时 (5:00-7:00)</option>
                    <option value="辰">辰时 (7:00-9:00)</option>
                    <option value="巳">巳时 (9:00-11:00)</option>
                    <option value="午">午时 (11:00-13:00)</option>
                    <option value="未">未时 (13:00-15:00)</option>
                    <option value="申">申时 (15:00-17:00)</option>
                    <option value="酉">酉时 (17:00-19:00)</option>
                    <option value="戌">戌时 (19:00-21:00)</option>
                    <option value="亥">亥时 (21:00-23:00)</option>
                </select>
            </div>
            
            <div class="control-group">
                <button id="calculate-btn">排盘 (使用当前时间)</button>
                <button id="auto-update-btn">自动更新</button>

            <button onclick="window.calculator && calculator.setCurrentDateTime()">设置当前时间</button>
            <button onclick="window.calculator && calculator.toggleAutoUpdate()">切换自动更新</button>
            <button onclick="window.calculator && calculator.openQianfaModal()">显示钤法</button>
            </div>
        </div>
        
        <!-- 排盘方式 -->
        <div class="row mb-3 mt-3">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">排盘方式</div>
                    <div class="card-body">
                        <div class="row mb-2">
                            <div class="col-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="time-selection" id="current-time" checked>
                                    <label class="form-check-label" for="current-time">当前时间</label>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="time-selection" id="random-number">
                                    <label class="form-check-label" for="random-number">随机数起盘</label>
                                </div>
                            </div>
                        </div>
                                        <div class="row mb-3">
                    <div class="col-6">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="time-selection" id="custom-time">
                            <label class="form-check-label" for="custom-time">自定义时间</label>
                        </div>
                    </div>
                </div>

                        <!-- 自定义时间输入 -->
                        <div id="custom-time-input" class="mt-3 d-none">
                            <input type="datetime-local" id="custom-date" class="form-control">
                        </div>

                        <!-- 随机数输入 -->
                        <div id="random-number-input" class="mt-3 d-none">
                            <div class="input-group">
                                <input type="number" id="random-number-value" class="form-control" min="1" max="12" value="1">
                                <button class="btn btn-outline-secondary" type="button" onclick="generateRandomNumber()">随机</button>
                            </div>
                            <small class="form-text text-muted">数字1对应子时(23:00-1:00)</small>
                        </div>

                        
                        
                        <!-- 排盘按钮 -->
                        <div class="mt-3 text-center">
                            <button id="generate-chart-btn" class="btn btn-primary">排盘</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 四柱显示 -->
        <div class="sizhu-panel chart-section" style="display: none;">
            <table class="sizhu-table">
                <thead>
                    <tr>
                        <th>年柱</th>
                        <th>月柱</th>
                        <th>日柱</th>
                        <th>时柱</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <span class="gan" id="year-gan">甲</span>
                            <span class="zhi" id="year-zhi">子</span>
                        </td>
                        <td>
                            <span class="gan" id="month-gan">乙</span>
                            <span class="zhi" id="month-zhi">丑</span>
                        </td>
                        <td>
                            <span class="gan" id="day-gan">丙</span>
                            <span class="zhi" id="day-zhi">寅</span>
                        </td>
                        <td>
                            <span class="gan" id="hour-gan">丁</span>
                            <span class="zhi" id="hour-zhi">卯</span>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <!-- 旬干显示 -->
            <!-- <div class="xungan-info">
                <span class="xungan-label">旬首：</span>
                <span class="xungan-value" id="xungan-value">甲子</span>
            </div> -->
            
            <!-- 当前时间显示 -->
            <!-- <div class="time-info">
                <span class="time-label">当前时间：</span>
                <span class="time-value" id="current-time">--:--:--</span>
            </div> -->
        </div>

        
        <!-- 三传表格 -->
        <div class="sanchuan-container chart-section" style="display: none;">
            <div class="row g-3 mb-4">
                <!-- 三传 - 主卡片 -->
                <div class="col-12">
                    <div class="card main-card">
                        <div class="card-body p-4">
                            <!-- 初传卡片 -->
                            <div class="card inner-card mb-3">
                                <div class="card-body d-flex align-items-center">
                                    <span class="transmission-label me-3">初传：</span>
                                    <div class="d-flex flex-grow-1 justify-content-center align-items-center">
                                        <div class="sanchuan-box">
                                            <span id="chuchuan-liuqin" class="sanchuan-cell">妻财</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="chuchuan-shishen" class="sanchuan-cell">食神</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="chuchuan-gan" class="sanchuan-cell text-danger">丙</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="chuchuan-zhi" class="sanchuan-cell">戌</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="chuchuan-tianjiang" class="sanchuan-cell text-success">六合/六合</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 中传卡片 -->
                            <div class="card inner-card mb-3">
                                <div class="card-body d-flex align-items-center">
                                    <span class="transmission-label me-3">中传：</span>
                                    <div class="d-flex flex-grow-1 justify-content-center align-items-center">
                                        <div class="sanchuan-box">
                                            <span id="zhongchuan-liuqin" class="sanchuan-cell">子孙</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="zhongchuan-shishen" class="sanchuan-cell">比肩</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="zhongchuan-gan" class="sanchuan-cell text-secondary">甲</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="zhongchuan-zhi" class="sanchuan-cell text-danger">午</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="zhongchuan-tianjiang" class="sanchuan-cell text-primary">天后/白虎</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 末传卡片 -->
                            <div class="card inner-card">
                                <div class="card-body d-flex align-items-center">
                                    <span class="transmission-label me-3">末传：</span>
                                    <div class="d-flex flex-grow-1 justify-content-center align-items-center">
                                        <div class="sanchuan-box">
                                            <span id="mochuan-liuqin" class="sanchuan-cell">兄弟</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="mochuan-shishen" class="sanchuan-cell">七杀</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="mochuan-gan" class="sanchuan-cell text-warning">庚</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="mochuan-zhi" class="sanchuan-cell text-success">寅</span>
                                        </div>
                                        <div class="sanchuan-separator">|</div>
                                        <div class="sanchuan-box">
                                            <span id="mochuan-tianjiang" class="sanchuan-cell text-warning">白虎/天后</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 四课表格 -->
        <div class="sike-container chart-section" style="display: none;">
            <div class="row g-3 mb-4">
                <!-- 第四课 -->
                <div class="col-3">
                    <div class="card sike-card">
                        <div class="card-header text-center sike-tianjiang">
                            <span id="sike-4-tianjiang">支阴天将</span>
                        </div>
                        <div class="card-body p-0">
                            <div class="sike-top text-center py-2">
                                <span id="sike-4-top" class="sike-cell">支阴</span>
                            </div>
                            <hr class="my-0">
                            <div class="sike-bottom text-center py-2">
                                <span id="sike-4-bottom" class="sike-cell">支上</span>
                            </div>
                        </div>
                        <div class="card-footer text-center">
                            <small class="text-muted">第四课</small>
                        </div>
                    </div>
                </div>
                
                <!-- 第三课 -->
                <div class="col-3">
                    <div class="card sike-card">
                        <div class="card-header text-center sike-tianjiang">
                            <span id="sike-3-tianjiang">支上天将</span>
                        </div>
                        <div class="card-body p-0">
                            <div class="sike-top text-center py-2">
                                <span id="sike-3-top" class="sike-cell">支上</span>
                            </div>
                            <hr class="my-0">
                            <div class="sike-bottom text-center py-2">
                                <span id="sike-3-bottom" class="sike-cell">日支</span>
                            </div>
                        </div>
                        <div class="card-footer text-center">
                            <small class="text-muted">第三课</small>
                        </div>
                    </div>
                </div>
                
                <!-- 第二课 -->
                <div class="col-3">
                    <div class="card sike-card">
                        <div class="card-header text-center sike-tianjiang">
                            <span id="sike-2-tianjiang">干阴天将</span>
                        </div>
                        <div class="card-body p-0">
                            <div class="sike-top text-center py-2">
                                <span id="sike-2-top" class="sike-cell">干阴</span>
                            </div>
                            <hr class="my-0">
                            <div class="sike-bottom text-center py-2">
                                <span id="sike-2-bottom" class="sike-cell">干上</span>
                            </div>
                        </div>
                        <div class="card-footer text-center">
                            <small class="text-muted">第二课</small>
                        </div>
                    </div>
                </div>
                
                <!-- 第一课 -->
                <div class="col-3">
                    <div class="card sike-card">
                        <div class="card-header text-center sike-tianjiang">
                            <span id="sike-1-tianjiang">干上天将</span>
                        </div>
                        <div class="card-body p-0">
                            <div class="sike-top text-center py-2">
                                <span id="sike-1-top" class="sike-cell">干上</span>
                            </div>
                            <hr class="my-0">
                            <div class="sike-bottom text-center py-2">
                                <span id="sike-1-bottom" class="sike-cell">日干</span>
                            </div>
                        </div>
                        <div class="card-footer text-center">
                            <small class="text-muted">第一课</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="plate-container chart-section" style="display: none;">
            <div class="plate-wrapper">
                <table class="plate-table">
                    <tr>
                        <td class="branch-cell" data-branch="巳">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">巳</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">巳</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="午">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">午</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">午</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="未">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">未</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">未</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="申">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">申</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">申</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="branch-cell" data-branch="辰">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">辰</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">辰</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="branch-cell" data-branch="酉">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">酉</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">酉</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="branch-cell" data-branch="卯">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">卯</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">卯</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="branch-cell" data-branch="戌">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">戌</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">戌</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="branch-cell" data-branch="寅">
                            <div class="tianpan-tianjiang tianjiang">太常</div>
                            <div class="tianpan-branch heaven-branch">寅</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan">壬</div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">寅</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="丑">
                            <div class="tianpan-tianjiang tianjiang">玄武</div>
                            <div class="tianpan-branch heaven-branch">丑</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan">癸</div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">丑</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="子">
                            <div class="tianpan-tianjiang tianjiang">太阴</div>
                            <div class="tianpan-branch heaven-branch">子</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan">甲</div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">子</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="亥">
                            <div class="tianpan-tianjiang tianjiang">天后</div>
                            <div class="tianpan-branch heaven-branch">亥</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan">乙</div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">亥</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <div class="jiangan-row">
                                    <span class="jiangan">甲</span>
                                    <div class="jiangan-nayin"></div>
                                </div>
                                <div class="fujian-row">
                                    <span class="fujian">丙</span>
                                    <div class="fujian-nayin"></div>
                                </div>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div class="result-info chart-section" style="display: none;">
            <p id="calculation-info">请计算天地盘</p>
        </div>
        
        <!-- 钤法弹出框 -->
        <div id="qianfa-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>钤法</h2>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="qianfa-content" id="qianfa-content">
                        <!-- 钤法内容将在这里显示 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 尝试多个CDN源，确保库能够加载 -->
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.12/lunar.min.js" onerror="this.onerror=null;this.src='https://unpkg.com/lunar-javascript@1.6.12/lunar.min.js'"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
