<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>卿式大六壬</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>卿式大六壬</h1>
                
        <div class="control-panel">
            <div class="control-group">
                <label for="month-general">月将 (自动):</label>
                <select id="month-general">
                    <option value="亥">正月雨水后 - 亥(登明)</option>
                    <option value="戌">二月春分后 - 戌(河魁)</option>
                    <option value="酉">三月谷雨后 - 酉(从魁)</option>
                    <option value="申">四月小满后 - 申(传送)</option>
                    <option value="未">五月夏至后 - 未(小吉)</option>
                    <option value="午">六月大暑后 - 午(胜光)</option>
                    <option value="巳">七月处暑后 - 巳(太乙)</option>
                    <option value="辰">八月白露后 - 辰(天罡)</option>
                    <option value="卯">九月寒露后 - 卯(太冲)</option>
                    <option value="寅">十月立冬后 - 寅(功曹)</option>
                    <option value="丑">十一月大雪后 - 丑(大吉)</option>
                    <option value="子">十二月小寒后 - 子(神后)</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="time-branch">占时 (自动):</label>
                <select id="time-branch">
                    <option value="子">子时 (23:00-1:00)</option>
                    <option value="丑">丑时 (1:00-3:00)</option>
                    <option value="寅">寅时 (3:00-5:00)</option>
                    <option value="卯">卯时 (5:00-7:00)</option>
                    <option value="辰">辰时 (7:00-9:00)</option>
                    <option value="巳">巳时 (9:00-11:00)</option>
                    <option value="午">午时 (11:00-13:00)</option>
                    <option value="未">未时 (13:00-15:00)</option>
                    <option value="申">申时 (15:00-17:00)</option>
                    <option value="酉">酉时 (17:00-19:00)</option>
                    <option value="戌">戌时 (19:00-21:00)</option>
                    <option value="亥">亥时 (21:00-23:00)</option>
                </select>
            </div>
            
            <div class="control-group">
                <button id="calculate-btn">排盘 (使用当前时间)</button>
                <button id="auto-update-btn">自动更新</button>

            <button onclick="window.calculator && calculator.setCurrentDateTime()">设置当前时间</button>
            <button onclick="window.calculator && calculator.toggleAutoUpdate()">切换自动更新</button>
            <button onclick="window.calculator && calculator.openQianfaModal()">显示钤法</button>
            </div>
        </div>
        
        <!-- 四柱显示 -->
        <div class="sizhu-panel">
            <table class="sizhu-table">
                <thead>
                    <tr>
                        <th>年柱</th>
                        <th>月柱</th>
                        <th>日柱</th>
                        <th>时柱</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <span class="gan" id="year-gan">甲</span>
                            <span class="zhi" id="year-zhi">子</span>
                        </td>
                        <td>
                            <span class="gan" id="month-gan">乙</span>
                            <span class="zhi" id="month-zhi">丑</span>
                        </td>
                        <td>
                            <span class="gan" id="day-gan">丙</span>
                            <span class="zhi" id="day-zhi">寅</span>
                        </td>
                        <td>
                            <span class="gan" id="hour-gan">丁</span>
                            <span class="zhi" id="hour-zhi">卯</span>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <!-- 旬干显示 -->
            <!-- <div class="xungan-info">
                <span class="xungan-label">旬首：</span>
                <span class="xungan-value" id="xungan-value">甲子</span>
            </div> -->
            
            <!-- 当前时间显示 -->
            <!-- <div class="time-info">
                <span class="time-label">当前时间：</span>
                <span class="time-value" id="current-time">--:--:--</span>
            </div> -->
        </div>

        
        <!-- 三传表格 -->
        <div class="sanchuan-container">
            <table class="sanchuan-table">
                <!-- <thead>
                    <tr>
                        <th>传</th>
                        <th>六亲</th>
                        <th>十神</th>
                        <th>天干</th>
                        <th>地支</th>
                        <th>天将</th>
                    </tr>
                </thead> -->
                <tbody>
                    <tr>
                        <td class="chuan-name">初传</td>
                        <td class="sanchuan-cell" id="chuchuan-liuqin">初传六亲</td>
                        <td class="sanchuan-cell" id="chuchuan-shishen">初传十神</td>
                        <td class="sanchuan-cell" id="chuchuan-gan">初传天干</td>
                        <td class="sanchuan-cell" id="chuchuan-zhi">初传地支</td>
                        <td class="sanchuan-cell" id="chuchuan-tianjiang">初传天将</td>
                    </tr>
                    <tr>
                        <td class="chuan-name">中传</td>
                        <td class="sanchuan-cell" id="zhongchuan-liuqin">中传六亲</td>
                        <td class="sanchuan-cell" id="zhongchuan-shishen">中传十神</td>
                        <td class="sanchuan-cell" id="zhongchuan-gan">中传天干</td>
                        <td class="sanchuan-cell" id="zhongchuan-zhi">中传地支</td>
                        <td class="sanchuan-cell" id="zhongchuan-tianjiang">中传天将</td>
                    </tr>
                    <tr>
                        <td class="chuan-name">末传</td>
                        <td class="sanchuan-cell" id="mochuan-liuqin">末传六亲</td>
                        <td class="sanchuan-cell" id="mochuan-shishen">末传十神</td>
                        <td class="sanchuan-cell" id="mochuan-gan">末传天干</td>
                        <td class="sanchuan-cell" id="mochuan-zhi">末传地支</td>
                        <td class="sanchuan-cell" id="mochuan-tianjiang">末传天将</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 四课表格 -->
        <div class="sike-container">
            <table class="sike-table">
                <thead>
                    <!-- <tr>
                        <th>四</th>
                        <th>三</th>
                        <th>二</th>
                        <th>一</th>
                    </tr> -->
                </thead>
                <tbody>
                    <tr class="sike-tianjiang">
                        <td class="sike-cell" id="sike-4-tianjiang">支阴天将</td>
                        <td class="sike-cell" id="sike-3-tianjiang">支上天将</td>
                        <td class="sike-cell" id="sike-2-tianjiang">干阴天将</td>
                        <td class="sike-cell" id="sike-1-tianjiang">干上天将</td>
                    </tr>
                    <tr class="sike-top">
                        <td class="sike-cell" id="sike-4-top">支阴</td>
                        <td class="sike-cell" id="sike-3-top">支上</td>
                        <td class="sike-cell" id="sike-2-top">干阴</td>
                        <td class="sike-cell" id="sike-1-top">干上</td>
                    </tr>
                    
                    <tr class="sike-bottom">
                        <td class="sike-cell" id="sike-4-bottom">支上</td>
                        <td class="sike-cell" id="sike-3-bottom">日支</td>
                        <td class="sike-cell" id="sike-2-bottom">干上</td>
                        <td class="sike-cell" id="sike-1-bottom">日干</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="plate-container">
            <div class="plate-wrapper">
                <table class="plate-table">
                    <tr>
                        <td class="branch-cell" data-branch="巳">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">巳</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">巳</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="午">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">午</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">午</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="未">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">未</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">未</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="申">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">申</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">申</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="branch-cell" data-branch="辰">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">辰</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">辰</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="branch-cell" data-branch="酉">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">酉</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">酉</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="branch-cell" data-branch="卯">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">卯</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">卯</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="branch-cell" data-branch="戌">
                            <div class="tianpan-tianjiang tianjiang"></div>
                            <div class="tianpan-branch heaven-branch">戌</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan"></div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">戌</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="branch-cell" data-branch="寅">
                            <div class="tianpan-tianjiang tianjiang">太常</div>
                            <div class="tianpan-branch heaven-branch">寅</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan">壬</div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">寅</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="丑">
                            <div class="tianpan-tianjiang tianjiang">玄武</div>
                            <div class="tianpan-branch heaven-branch">丑</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan">癸</div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">丑</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="子">
                            <div class="tianpan-tianjiang tianjiang">太阴</div>
                            <div class="tianpan-branch heaven-branch">子</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan">甲</div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">子</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                        <td class="branch-cell" data-branch="亥">
                            <div class="tianpan-tianjiang tianjiang">天后</div>
                            <div class="tianpan-branch heaven-branch">亥</div>
                            <div class="shishen-liuqin-container">
                                <div class="shishen-display"></div>
                                <div class="liuqin-display"></div>
                            </div>
                            <div class="sandun-container">
                                <div class="rendun-row">
                                    <div class="rendun-display"></div>
                                    <div class="rendun-nayin"></div>
                                </div>
                                <div class="tiandun-row">
                                    <div class="tiandun-display"></div>
                                    <div class="tiandun-nayin"></div>
                                </div>
                                <div class="xungan-row">
                                    <div class="xungan-display xungan">乙</div>
                                    <div class="xungan-nayin"></div>
                                </div>
                            </div>
                            <div class="dipan-branch ground-branch">亥</div>
                            <div class="dipan-tianjiang-bottom dipan-tianjiang"></div>
                            <div class="jianjian-display">
                                <span class="jiangan">甲</span>
                                <span class="fujian">丙</span>
                            </div>
                            <div class="changsheng-yueling-container">
                                <div class="yueling-display"></div>
                                <div class="changsheng-display"></div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div class="result-info">
            <p id="calculation-info">请计算天地盘</p>
        </div>
        
        <!-- 钤法弹出框 -->
        <div id="qianfa-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>钤法</h2>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="qianfa-content" id="qianfa-content">
                        <!-- 钤法内容将在这里显示 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 尝试多个CDN源，确保库能够加载 -->
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.12/lunar.min.js" onerror="this.onerror=null;this.src='https://unpkg.com/lunar-javascript@1.6.12/lunar.min.js'"></script>
    <script src="script.js"></script>
</body>
</html>
